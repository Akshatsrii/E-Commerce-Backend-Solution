<%- include("../partials/header") %>

<div class="container section">

    <div class="section-header">
        <h2 class="section-title">Admin Dashboard</h2>
    </div>

    <!-- ===== STATS CARDS ===== -->
    <div class="dashboard-stats">

        <div class="stat-card">
            <div class="stat-value"><%= stats.products %></div>
            <div class="stat-label">Products</div>
        </div>

        <div class="stat-card secondary">
            <div class="stat-value"><%= stats.orders %></div>
            <div class="stat-label">Orders</div>
        </div>

        <div class="stat-card success">
            <div class="stat-value"><%= stats.users %></div>
            <div class="stat-label">Users</div>
        </div>

        <div class="stat-card warning">
            <div class="stat-value">₹<%= stats.revenue %></div>
            <div class="stat-label">Revenue</div>
        </div>

    </div>


    <!-- ===== RECENT ORDERS ===== -->
    <div class="section-header mt-4">
        <h3 class="section-title">Recent Orders</h3>
    </div>

    <div class="table-container">

        <table>

            <thead>
                <tr>
                    <th>Customer</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Date</th>
                </tr>
            </thead>

            <tbody>

                <% recentOrders.forEach(o => { %>

                    <tr>

                        <td><strong><%= o.user?.name || "Unknown" %></strong></td>

                        <td>₹<%= o.totalAmount %></td>

                        <td>

                            <% if (o.status === "completed") { %>
                                <span class="badge badge-success">Completed</span>
                            <% } else if (o.status === "pending") { %>
                                <span class="badge badge-warning">Pending</span>
                            <% } else { %>
                                <span class="badge badge-danger"><%= o.status %></span>
                            <% } %>

                        </td>

                        <td>
                            <%= new Date(o.createdAt).toLocaleDateString() %>
                        </td>

                    </tr>

                <% }) %>

            </tbody>

        </table>

    </div>

</div>

<%- include("../partials/footer") %>
