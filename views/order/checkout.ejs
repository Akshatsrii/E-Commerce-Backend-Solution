<%- include("../partials/header") %>

<div class="container text-center mt-4">
    <h2>Checkout</h2>

    <button id="checkoutBtn" class="btn btn-primary mt-3">
        Pay with Stripe
    </button>
</div>

<script src="https://js.stripe.com/v3/"></script>

<script>
const stripe = Stripe("<%= stripePublicKey %>");

document.getElementById("checkoutBtn").addEventListener("click", async () => {

    const res = await fetch("/api/orders/create", {
        method: "POST"
    });

    const data = await res.json();

    stripe.redirectToCheckout({
        sessionId: data.id
    });

});
</script>

<%- include("../partials/footer") %>
